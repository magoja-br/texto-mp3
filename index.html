<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-1.0">
    <title>Texto para MP3</title>
    <link rel="stylesheet" href="style.css">
    <!-- Bibliotecas para leitura de arquivos -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <!-- Biblioteca para codificação MP3 no navegador -->
    <script src="https://cdn.jsdelivr.net/npm/lamejs@1.2.0/lame.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Texto para MP3</h1>

        <div class="input-section">
            <label for="fileInput">Carregar arquivo (PDF, DOCX, XLSX, TXT):</label>
            <input type="file" id="fileInput" accept=".pdf,.docx,.xlsx,.txt">
        </div>

        <div class="input-section">
            <label for="textInput">Ou digite seu texto aqui:</label>
            <textarea id="textInput" rows="10" placeholder="Cole ou digite o texto para converter..."></textarea>
        </div>

        <div class="options-section">
            <div class="option-group">
                <label for="voiceSelect">Voz:</label>
                <select id="voiceSelect"></select>
            </div>
            <div class="option-group">
                <label for="speedInput">Velocidade da Fala:</label>
                <input type="range" id="speedInput" min="0.25" max="4.0" value="1.0" step="0.25">
                <span id="speedValue">1.0x</span>
            </div>
        </div>

        <button id="generateBtn" disabled>Gerar MP3</button>
        <button id="clearSelectionBtn" style="display: none;">Limpar Seleção</button>

        <div id="status" class="status-message"></div>

        <div class="text-display-section">
            <h2>Conteúdo do Texto:</h2>
            <div id="selectedParagraphs">Parágrafos selecionados: 0</div>
            <div id="textDisplay" class="text-content"></div>
        </div>

        <div class="audio-section">
            <h2>Áudio Gerado:</h2>
            <audio id="audioPlayer" controls></audio>
            <button id="downloadBtn" style="display: none;"><a id="downloadLink" href="#" download="audio_sintetizado.mp3">Baixar MP3</a></button>
        </div>
    </div>

    <script>
        // Exibir o valor da velocidade da fala
        const speedInput = document.getElementById('speedInput');
        const speedValue = document.getElementById('speedValue');
        speedInput.addEventListener('input', () => {
            speedValue.textContent = `${speedInput.value}x`;
        });
    </script>
    <script src="script.js"></script>
</body>
</html>